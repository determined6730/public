# binder on android 
독립된 프로세서들을 연결해 주는 역할   
시스템의 기능을 이용하기 위해 시스템콜을 사용하여 시스템에서 제공하는 프로세서, 파일시스템 기능을 이용하도록 제공하고 있음  
각 독립적으로 운영되는 프로세스, 서비스의 기능을 이용할 수 있도록 제공하는 것이 바인더의 핵심  

  
BeOS라는 운영체제에서 시작됨   
운영체제 혹은 시스템에서 제공해 주는 기능을 각각의 컴포넌트 혹은 모듈형태로 만들고 이것을 운영할 수 있도록 만들어 주는것이 바인더의 가장 큰 목적  

## 구성 
- binder driver  
  서비스 프로바이더와 서비스 유저 사이의 데이터를 전달하는 역활 
- 서비스 프로바이더 
  시스템에서 서비스를 제공하는 서비스 역활, 바인더 드라이버로부터 받은 데이터를 파싱하여 처리하는 역활 
- 서비스 매니저 
  특별한 서비스 프로바이더 , 다른 서비스 프로바이더의 서비스를 관장 
- 서비스 유저 
  서비스 프로바이더의 기능을 호출하는 응용 프로그램이나 서비스다   
  바인더의 핵심은 IPC방법을 통하여 다른 프로세스,  즉 서비스 프로바이더의 기능을 호출하는 것이 목적 


안드로이드에서 바인더 드라이버를 추가해서 프로세스간 통신을 수행하는 이유는?  
커널공간을 통해서 데이터 신뢰성  
IPC간의 보안문제 해결   

- 핸들 : 서비스를 구별하는 번호, 어떤 서비스에 바인더 IPC데이터를 전달해야하는지 결정   
- RPC data : 함수 실행시 쓰이는 data 
- RPC code : 실행하고자하는 code 
- binder protocol : ipc protocol 
BC_TRANSACTION 을 하게 되면  

바인더드라비어에서 트랜잭션보고 핸들로 서비스를 찾은 다음 데이터를 그쪽으로 넘기거 거기서 해당 코드가 실해됨 

## 바인더 IPC 데이터의 전달 
: 바인더를 통해 RPC를 시도하는 응용프로그램은 open시스템 콜을 통해 바인더 드라이버의 파일 디스크립터를 얻는다.   
: mmap을 통해서 IPC데이터를 수신하기 위한 공유 공간을 확보 
: ioctl함수의 인자로 바인더 드라이브에 IPC데이터를 전달  

## binder addressing 
- IPC데이터의 핸들을 가지고 서비스 서버를 찾음, 이과정을 addressing이라고 함 
- 다양한 서비스를 모두 목록화해서 관리하는 컨텍스트 매니저라는 특벼란 프로세스가 서비스마다 핸들(바인더 IPC의 목적지 주소로 사용)라는 번호 값을 할당, 서비스 추가/검색 등의 관리 기능을 수행 

### 서비스 등록 
서비스 서버는 서비스에 대한 접근정보를 컨텍스트 매니저에 등록 
부팅단계에서 끝나고, 등록이 끝나면 컨텍스트 매니저의 서비스 목록, 바인더 드라이버의 바인더 노드, 등등이 사용가능한상태가됨 



## references 
- https://dev-ahn.tistory.com/89


